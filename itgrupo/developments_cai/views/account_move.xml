<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record id="view_account_move_invoice_form_cai" model="ir.ui.view">
            <field name="name">account.move.invoice.form.cai</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>
            <field name="arch" type="xml">
                <xpath expr="//group[@name='sale_info_group']//field[@name='delivery_date']" position="after">
                    <field name="tipo_ingreso" invisible="company_id != 10"/>
                    <field name="lider_comercial_id" invisible="company_id != 10"/>
                    <field name="tipo_categ_service" invisible="company_id != 10"/>
                    <field name="tipo_pacto" invisible="company_id != 10"/>
                    <field name="grupo_cliente_id" invisible="company_id != 10"/>
                    <field name="grupo_cliente_id_02" invisible="company_id != 10"/>
                    <field name="grupo_cliente_id_03" invisible="company_id != 10"/>
                    <field name="code_project" invisible="company_id != 10"/>
                    <field name="tipo_factura_cai" invisible="company_id != 10"/>
                    <field name="tag_ids" widget="many2many_tags"
                           options="{'color_field': 'color', 'no_create_edit': True}" invisible="company_id != 10"/>
                </xpath>

            </field>
        </record>

        <record id="view_account_move_invoice_update_form_cai" model="ir.ui.view">
            <field name="name">account.move.invoice.update.form.cai</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='team_id']" position="attributes">
                    <attribute name="string">Equipo de Facturaci√≥n</attribute>
                </xpath>

            </field>
        </record>


        <record id="action_server_send_masivo_invoice" model="ir.actions.server">
            <field name="name">Enviar Masivamente Facturas Sunat</field>
            <field name="model_id" ref="account.model_account_move"/>
            <field name="binding_model_id" ref="account.model_account_move"/>
            <field name="binding_view_types">list</field>
            <field name="state">code</field>
            <field name="code">
                for record in records:
                record.button_process_edi_web_services()
            </field>
        </record>

        <record id="action_server_consultar_masivo_invoice" model="ir.actions.server">
            <field name="name">Consultar Masivamente Estado Sunat</field>
            <field name="model_id" ref="account.model_account_move"/>
            <field name="binding_model_id" ref="account.model_account_move"/>
            <field name="binding_view_types">list</field>
            <field name="state">code</field>
            <field name="code">
                for record in records:
                record.action_l10n_pe_edi_pse_status()
            </field>
        </record>

        <record id="view_account_view_out_invoice_tree_cai_cai" model="ir.ui.view">
            <field name="name">account.view_out_invoice_tree_cai_cai</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_out_invoice_tree"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='amount_total_in_currency_signed']" position="attributes">
                    <attribute name="sum">Total</attribute>
                </xpath>
                <xpath expr="//field[@name='amount_total_in_currency_signed']" position="after">
                    <field name="amount_untaxed" string="Total en divisa sin IGV" sum="Total"/>
                </xpath>
                <!--                 <xpath expr="//field[@name='amount_residual']" position="attributes">-->
                <!--                    <attribute name="sum">Total</attribute>-->
                <!--                </xpath>-->
            </field>
        </record>
    </data>
</odoo>